<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Guardar Comida ‚Äì {{ fecha }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoA6VJWcV5T2v9uWh9eqEFB1XMcVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"
  >
  <link rel="stylesheet" href="{{ url_for('static', filename='css/estilo.css') }}">
</head>
<body class="bg-light">

<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h1 class="card-title mb-3">A√±adir comida ‚Äì {{ fecha }}</h1>

          {% if mensaje %}
            <div class="alert alert-success">{{ mensaje }}</div>
          {% endif %}

          <form method="post" novalidate>
            <div class="mb-3">
              <label for="nombre_comida" class="form-label">Nombre de la comida</label>
              <input
                type="text"
                class="form-control"
                id="nombre_comida"
                name="nombre_comida"
                value="{{ request.form.nombre_comida or '' }}"
                placeholder="Ej. Desayuno"
                required
              >
            </div>

            {% for i in range(1,4) %}
              <fieldset class="border rounded p-3 mb-4">
                <legend class="w-auto px-2">Ingrediente {{ i }}</legend>

                <div class="mb-2">
                  <label for="ingrediente{{i}}" class="form-label">Nombre</label>
                  <input
                    type="text"
                    class="form-control"
                    id="ingrediente{{i}}"
                    name="ingrediente{{i}}"
                    value="{{ request.form['ingrediente' ~ i] or '' }}"
                    placeholder="Ej. Avena"
                  >
                </div>

                <div class="row g-2">
                  <div class="col-6">
                    <label class="form-label">Cantidad (g)</label>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      name="cantidad{{i}}"
                      value="{{ request.form['cantidad' ~ i] or '' }}"
                      placeholder="0"
                    >
                  </div>
                  <div class="col-6">
                    <label class="form-label">Calor√≠as</label>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      name="calorias{{i}}"
                      value="{{ request.form['calorias' ~ i] or '' }}"
                      placeholder="0"
                    >
                  </div>
                </div>

                <div class="row g-2 mt-2">
                  <div class="col-4">
                    <label class="form-label">CHO (g)</label>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      name="carbohidratos{{i}}"
                      value="{{ request.form['carbohidratos' ~ i] or '' }}"
                      placeholder="0"
                    >
                  </div>
                  <div class="col-4">
                    <label class="form-label">Prote√≠nas (g)</label>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      name="proteinas{{i}}"
                      value="{{ request.form['proteinas' ~ i] or '' }}"
                      placeholder="0"
                    >
                  </div>
                  <div class="col-4">
                    <label class="form-label">Grasas (g)</label>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      name="grasas{{i}}"
                      value="{{ request.form['grasas' ~ i] or '' }}"
                      placeholder="0"
                    >
                  </div>
                </div>
              </fieldset>
            {% endfor %}

            <button type="submit" class="btn btn-primary w-100">
              Guardar comida
            </button>
          </form>
        </div>

        <div class="card-footer text-center">
          <a href="{{ url_for('calculadora') }}" class="me-3">‚Üê Volver a la calculadora</a>
          <a href="{{ url_for('ver_comidas') }}">üìã Ver comidas</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS Bundle -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+AMvyTG2xUksdQRVvoxMfooAo5HI+"
  crossorigin="anonymous"
></script>
</body>
</html>
